http {  
    include       mime.types;  
    default_type  application/octet-stream;  
    sendfile        on;  
    keepalive_timeout  65;  

    upstream tomcat_group {  
        # If there is no specific strategy, round-robin  
        #     would be the default strategy.  
        # least_conn;  
        # ip_hash;  
        server 127.0.0.1:18080 weight=1 max_fails=2 fail_timeout=30s;  
        server 127.0.0.1:28080 weight=1 max_fails=2 fail_timeout=30s;  
    }  

    server {  
        listen       8080;  
        server_name  localhost;  

        location / {  
            proxy_pass http://tomcat_group;  
        }  
    }  
}  
